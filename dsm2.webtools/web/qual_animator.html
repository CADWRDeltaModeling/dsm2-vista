<!DOCTYPE html>
<head>
<title>Qual Animation of Tidefile</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 1. Load webcomponents-lite.min.js for polyfill support. -->
    <script src="bower_components/webcomponentsjs/webcomponents-lite.min.js">
    </script>
<link rel="import"
	href="bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import"
	href="bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import"
	href="bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import"
	href="bower_components/paper-slider/paper-slider.html">
<link rel="import"
	href="bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import"
	href="bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import"
	href="bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import"
	href="bower_components/paper-listbox/paper-listbox.html">
<link rel="import"
	href="bower_components/paper-item/paper-item.html">
<link rel="import"
	href="bower_components/paper-slider/paper-slider.html">
<link rel="import"
	href="bower_components/paper-input/paper-input.html">
<link rel="import"
	href="bower_components/vaadin-date-picker/vaadin-date-picker.html">
<link rel="import" href="qual-animation-element.html">
<link rel="import" href="time-slider.html">
<link rel="import" href="color-brewer-selector.html">
<link rel="import" href="array-input-editor.html">
<link rel="import" href="bower_components/iron-icons/av-icons.html">
<link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
 -->
<style>
#map {
	width: 100%;
	height: 800px;
}
</style>
<style>
#slider {
	margin: 10px;
}
</style>
</head>
<body class="fullbleed layout vertical">
	<template is="dom-bind" id="mainContext">
	<paper-drawer-panel peeking="True"> <paper-header-panel drawer>
	<paper-toolbar></paper-toolbar>
	<div class="container flex-vertical">
		<div>
			<paper-icon-button icon="av:play-arrow" id="play"></paper-icon-button>
			<paper-icon-button icon="av:pause" id="pause"></paper-icon-button>
		</div>
		<time-slider current-time="{{animateStartTime}}" begin-time="{{globalStartTime}}" end-time="{{globalEndTime}}"></time-slider>
		<div class="container flex-horizontal">
			<div id="anim">Animation Interval: {{animationSpeed}} ms</div>
			<paper-slider id="slider" name = "Animation Speed: " min="10" max="500" step="5" value="{{animationSpeed}}"></paper-slider>
		</div>
		<paper-dropdown-menu id="mapselector" label="Map Background" >
		<paper-listbox class="dropdown-content" selected="{{layerName}}" attr-for-selected="value">
		<paper-item value="Hydda.Full">Hydda.Full</paper-item>
		<paper-item value="Hydda.Base">Hydda.Base</paper-item>
		<paper-item value="Hydda.RoadsAndLabels">Hydda.RoadsAndLabels</paper-item>
		<paper-item value="OpenStreetMap.Mapnik">OpenStreetMap.Mapnik</paper-item>
		<paper-item value="OpenStreetMap.BlackAndWhite">OpenStreetMap.BlackAndWhite</paper-item>
		<paper-item value="OpenStreetMap.HOT">OpenStreetMap.HOT</paper-item>
		<paper-item value="OpenMapSurfer.Roads">OpenMapSurfer.Roads</paper-item>
		<paper-item value="OpenMapSurfer.AdminBounds">OpenMapSurfer.AdminBounds</paper-item>
		<paper-item value="OpenMapSurfer.Grayscale">OpenMapSurfer.Grayscale</paper-item>
		<paper-item value="Stamen.Toner">Stamen.Toner</paper-item>
		<paper-item value="Stamen.TonerLabels">Stamen.TonerLabels</paper-item>
		<paper-item value="Stamen.TonerLite">Stamen.TonerLite</paper-item>
		<paper-item value="Stamen.Watercolor">Stamen.Watercolor</paper-item>
		<paper-item value="Stamen.Terrain">Stamen.Terrain</paper-item>
		<paper-item value="Stamen.TerrainBackground">Stamen.TerrainBackground</paper-item>
		<paper-item value="Stamen.TopOSMRelief">Stamen.TopOSMRelief</paper-item>
		<paper-item value="Stamen.TopOSMFeatures">Stamen.TopOSMFeatures</paper-item>
		<paper-item value="Esri.WorldStreetMap">Esri.WorldStreetMap</paper-item>
		<paper-item value="Esri.WorldTopoMap">Esri.WorldTopoMap</paper-item>
		<paper-item value="Esri.WorldImagery">Esri.WorldImagery</paper-item>
		<paper-item value="Esri.WorldTerrain">Esri.WorldTerrain</paper-item>
		<paper-item value="Esri.WorldShadedRelief">Esri.WorldShadedRelief</paper-item>
		<paper-item value="Esri.WorldPhysical">Esri.WorldPhysical</paper-item>
		<paper-item value="Esri.OceanBasemap">Esri.OceanBasemap</paper-item>
		<paper-item value="Esri.NatGeoWorldMap">Esri.NatGeoWorldMap</paper-item>
		<paper-item value="Esri.WorldGrayCanvas">Esri.WorldGrayCanvas</paper-item>
		<paper-item value="CartoDB.Positron">CartoDB.Positron</paper-item>
		<paper-item value="CartoDB.DarkMatter">CartoDB.DarkMatter</paper-item>
		</paper-listbox>
		</paper-dropdown-menu>
		<array-input-editor label="Value Classes" current-value-as-array="{{valueClasses}}"></array-input-editor>
		<color-brewer-selector selected-colors='{{colorClasses}}'></color-brewer-selector>
	</div>
	</paper-header-panel> 
	<paper-header-panel main> 
	<paper-toolbar>
	<div>
		<h1>Qual Animation from DSM2 Tidefile Output</h1>
	</div>
	</paper-toolbar>
		<qual-animation-element id="animationElement"
		tidefile="D:/delta/dsm2_v812_2016_QAQC_Lan/studies/DSM2_201602_QAQC/output/historical_v81_ec.h5"
		center="[38, -121.6]"
		zoom="10"
		animate-interval="{{animationSpeed}}"
		animate-start-time="{{animateStartTime}} 0000"
		color-classes = "{{colorClasses}}"
		value-classes = "{{valueClasses}}"
		layer-name="{{layerName}}"
		file-start-time="{{globalStartTime}}"
		file-end-time="{{globalEndTime}}">
		</qual-animation-element>
	</paper-header-panel> 
	</paper-drawer-panel>
	</template>
	<script>
		document.getElementById('mainContext').layerName = 'Hydda.Full'
		document.getElementById('mainContext').animationSpeed = 150
		document.getElementById('mainContext').globalStartTime = '01JAN2000'
		document.getElementById('mainContext').globalEndTime = '01JAN2001'
		// Qualitative diverging
		document.getElementById('mainContext').colorClasses = ["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]
		document.getElementById('mainContext').valueClasses = [ 200, 500, 700, 1000, 1500, 3700, 4500, 8000, 10000, 15000, 18000, 25000]
		//
		//document.getElementById('mainContext').colorClasses = [ '#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026' ] // http://colorbrewer2.org/#type=sequential&scheme=YlOrRd&n=9
		//document.getElementById('mainContext').valueClasses = [ 200, 500, 750, 1000, 1500, 2000, 3300, 3500, 3800, 10000, 20000 ] // full delta value range
      // To ensure that elements are ready on polyfilled browsers, 
      // wait for WebComponentsReady. 
      var handlersInitialized = false;
      document.addEventListener('WebComponentsReady', function(e) {
    	  if (handlersInitialized) return;
	   	  //console.log('WebComponentsReady',e, handlersInitialized );
    	  
    	  handlersInitialized = true;
    	  
          var play = document.getElementById("play");
          var pause = document.getElementById("pause");
          play.addEventListener('tap', function(){
        	  console.log('Restarting Timer');
        	  document.getElementById('animationElement').restartTimer();
          });
          pause.addEventListener('tap', function(){
        	  console.log('Pausing Timer');
        	  document.getElementById('animationElement').stopTimer();
          });
      });
		
	</script>
</body>

</html>