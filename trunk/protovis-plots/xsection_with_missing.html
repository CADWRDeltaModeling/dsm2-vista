<!DOCTYPE html>
<html>
<head>
<title>Spline Editor</title>
<script type="text/javascript" src="protovis-d3.3.js"></script>
<script type="text/javascript" src="plots.js"></script>
<style type="text/css">
#center {
}
#fig {
	height: 600px;
	position: absolute;
	width: 800px;
}

.header {
	float: right;
	padding-top: 5px;
}

.instructions {
	position: relative;
}
</style>
</head>
<body>
<div class="instructions">
<h1>Introduction:</h1>
<p>The chart below shows :-
<ul>
 <li>The cross section as <b>hollow blue dots</b> connected with a blue line.</li> 
 <li>The <b>solid blue dots</b> are the points representing the elevation profile.</li>
 <li>The <b>green hollow circles</b> of various sizes are the bathymetry raw data points projected onto the cross-section.<br/>
The distance of these points from cross section represented by circles of varying size (also referenced in the legend at top left).<br/>
The age of these points are also scaled using a color that fades to white as the points get older ( scale referenced in the legend). <br/>
Also hovering over the bathymetry points will show the available information for those points.
</li>
</ul>
</p>
<h1>Usage:</h1>
<p> </p>
<ul>
	<li>Adding/Inserting Points:
	<p>Click to add points to the right most point or if you want to
	insert points carefully place mouse on the line between the two points
	(cursor should change)</p>
	</li>
	<li>Editing existing points:
	<p>Click and drag the point to the desired location.</p>
	</li>
	<li>Deleting existing points:
	<p>First select the point to be deleted by clicking on it. Then use
	the "Delete" key on your keyboard to remove it</p>
	</li>
</ul>
</div>
<div id="center">
<div id="fig"></div>
<script type="text/javascript">
    var w=800;
    var h=600;
    var xsection = [{x: 0, y: 39.5, z:-999.9}, {x: 136.4, y: 20.6, z:-999.9}, {x: 404.6, y: 9.92, z:-999.9},
                    {x: 613.7, y: -4.209, z:-999.9}, {x: 823.3, y:9.92, z:-999.9}, {x: 1018.3, y: 20.6, z:-999.9}, 
                    {x: 1227.4, y: 39.5, z:-999.9}];
	var dsm2xs = xsection.map(function(d){ return {x: d.x*(1.2-0.4*Math.random()), y:d.y*(1.2-0.4*Math.random())};});
	var profile = [ {x: 0, y:-999.9, z:-999.9}, {x: 25.4, y: 32.7, z:-999.9}, {x: 105.5, y: 22.8, z:-999.9}, 
	                {x: 125.6, y: 13.7, z:-999.9}, {x: 347.6, y: 4.4, z:-999.9}, {x: 553.6, y: -2.7, z:-999.9}, {x: 694.3, y: -4.3, z:-999.9}, 
	                {x: 897.3, y: 11.5, z:-999.9}, {x: 1033.3, y: 27.6, z:-999.9}, {x: 1434.3, y: 41.3, z:-999.9}, {x: 1533.5, y: 32.6, z:-999.9}];
	var profile_missing = pv.map(profile, function(p){ return {x:p.x, y:-999.9, z:-999.9}})    
	var points = pv.range(1,100).map(function(i) { return (
		{x: Math.random()*1500, y:-5+Math.random()*40, z: 400-Math.random()*800, year: Math.random()*50+1960}
		);
	});
    
	plots.xsection_editor("fig",xsection, dsm2xs, profile, points, w, h);    
    </script></div>
</body>
</html>
